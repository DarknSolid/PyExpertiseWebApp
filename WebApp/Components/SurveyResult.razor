@using WebApp.Models;

<MudText Typo="Typo.h6" GutterBottom="true">Import Analysis Results</MudText>
<MudDivider Light="true" />
<MudCard>
    <MudCardContent>
        <MudText GutterBottom="true"><strong>The below table shows the total amount of imports that you have committed:</strong></MudText>

        <div class="d-flex flex-column gap-10">

            <MudTable Items="@ImportResults" Hover="true" Breakpoint="Breakpoint.Sm">
                <HeaderContent>
                    <MudTh><MudTableSortLabel SortBy="new Func<Library, object>(x=>x.Name)">Library</MudTableSortLabel></MudTh>
                    <MudTh><MudTableSortLabel InitialDirection="SortDirection.Descending" SortBy="new Func<Library, object>(x=>x.TotalImports)">Total Imports</MudTableSortLabel></MudTh>
                    <MudTh><MudTableSortLabel SortBy="new Func<Library, object>(x=>x.IsStandardLibrary)"><MudTooltip Placement="Placement.Top" Text="If the library belongs to the list of Python standard libraries">Standard Library</MudTooltip></MudTableSortLabel></MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd>@context.Name</MudTd>
                    <MudTd>@context.TotalImports</MudTd>
                    <MudTd>@(context.IsStandardLibrary ? "yes" : "no")</MudTd>
                </RowTemplate>
            </MudTable>
        </div>

    </MudCardContent>
    <MudCardActions>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto" OnClick="OnSubmit">Finish</MudButton>
    </MudCardActions>
</MudCard>

@code {
    [Parameter, EditorRequired]
    public IEnumerable<Library> ImportResults { get; set; }

    [Parameter, EditorRequired]
    public Func<Task> OnSubmit { get; set; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
    }

}
